<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="index, follow" />

  <title></title>
  <meta name="description" content="">

  <!-- Open Graph -->
  <meta property="og:title" content="">
  <meta property="og:site_name" content="ModelConnect Miami" />
  <meta property="og:locale" content="ru_RU" />
  <meta property="og:description" content="">
  <meta property="og:image" content="https://models-connect.netlify.app/img/og-image-main.webp ">
  <meta property="og:image:alt" content=""/>
  <meta property="og:image:width" content="300" />
  <meta property="og:image:height" content="200" />
  <meta property="og:url" content="https://models-connect.netlify.app">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="ru_RU" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="">
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content="https://models-connect.netlify.app/img/og-image-main.webp ">

  <!-- Canonical -->
 <link rel="canonical" href="https://models-connect.netlify.app/add-profile/">

  <!-- Favicon -->
 <link
      rel="icon"
      type="image/x-icon"
      href="https://models-connect.netlify.app/favicon.ico"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://models-connect.netlify.app/img/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="https://models-connect.netlify.app/img/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="https://models-connect.netlify.app/img/favicon-16x16.png"
    />
    <link
      rel="manifest"
      href="https://models-connect.netlify.app/img/site.webmanifest"
    />
    <link rel="stylesheet" href="https://models-connect.netlify.app/css/style.css">

  <!-- Schema.org JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "CollectionPage",
      "name": "",
      "description": "",
      "url": "https://models-connect.netlify.app/add-profile/",
      "datePublished": "2025-08-31T11:54:22Z",
      "mainEntity": {
        "@type": "ItemList",
        "itemListElement": [
         

        ]
      }
    ,
     "breadcrumb": {
          "@type": "BreadcrumbList",
          "@id": "https://models-connect.netlify.app/#breadcrumb",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Главная",
              "item": "https://models-connect.netlify.app"
            }
          ]
        }
  }
  </script>

</head>
<body>

  <nav>
    <ul class="nav-list">
      <li><a href="/">Главная</a></li>
      <li><a href="/region/">Регионы</a></li>
      <li><a href="/category/">Категории</a></li>
      <li><a href="/add-profile/">Добавить профиль</a></li>
    </ul>
  </nav>

  <main>
    <script>
const form = document.querySelector("form");
form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const data = {
    name: form.name.value,
    city: form.city.value,
    category: form.category.value,
    description: form.description.value,
    age: form.age.value,
    email: form.email.value,
    phone: form.phone.value,
    image: "/img/placeholder.png"
  };

  const res = await fetch("/.netlify/functions/add-profile", {
    method: "POST",
    body: JSON.stringify(data),
  });

  if (res.ok) {
    window.location.href = "/submit-profile/";
  } else {
    alert("Ошибка при отправке формы");
  }
});
</script>
<script type="module">

  async function cloudinaryUpload(file) {
    const form = new FormData();
    form.append('file', file);
    form.append('upload_preset', 'YOUR_UNSIGNED_UPLOAD_PRESET'); // поставь из Cloudinary
    const res = await fetch('https://api.cloudinary.com/v1_1/YOUR_CLOUD_NAME/upload', {
      method: 'POST',
      body: form
    });
    const data = await res.json();
    if (!res.ok) throw new Error('Cloudinary upload failed: ' + JSON.stringify(data));
    return data.secure_url;
  }

  document.querySelector('#add-profile-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const form = e.target;
    const fd = new FormData(form);
    const name = fd.get('name');


    let image_url = '';
    const file = fd.get('image');
    if (file && file.size) {
      try {
        image_url = await cloudinaryUpload(file);
      } catch (err) {
        alert('Ошибка загрузки изображения: ' + err.message);
        return;
      }
    }

    const payload = {
      name,
      city: fd.get('city'),
      category: fd.get('category'),
      description: fd.get('description'),
      age: fd.get('age'),
      email: fd.get('email'),
      phone: fd.get('phone'),
      image_url
    };


    const resp = await fetch('/.netlify/functions/add-profile', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });

    if (!resp.ok) {
      const text = await resp.text();
      alert('Ошибка сервера: ' + text);
      return;
    }

    const result = await resp.json();
    alert('Профиль добавлен!');
    form.reset();
  });
</script>

<div class="add-profile-section">
  <h1>Добавить профиль</h1>
  <form name="add-profile"
      method="POST"
      netlify
    action="/.netlify/functions/add-profile"
     id="add-profile-form"
      enctype="multipart/form-data">
  <input type="hidden" name="form-name" value="add-profile" />

  <div class="form-group">
    <label for="name">Имя:</label>
    <input type="text" id="name" name="name" required />
  </div>

  <div class="form-group">
    <label for="city">Город:</label>
    <select id="city" name="city" required>
      <option value="Майами-Бич">Майами-Бич</option>
      <option value="Халландейл">Халландейл</option>
      <option value="Корал-Гейблс">Корал-Гейблс</option>
    </select>
  </div>

  <div class="form-group">
    <label for="category">Категория:</label>
    <select id="category" name="category" required>
      <option value="Модель">Модель</option>
      <option value="Фотограф">Фотограф</option>
      <option value="Стилист">Стилист</option>
    </select>
  </div>

  <div class="form-group">
    <label for="description">Описание:</label>
    <textarea id="description" name="description" required></textarea>
  </div>

  <div class="form-group">
    <label for="age">Возраст:</label>
    <input type="number" id="age" name="age" required />
  </div>

  <div class="form-group">
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required />
  </div>

  <div class="form-group">
    <label for="phone">Телефон (опционально):</label>
    <input type="tel" id="phone" name="phone" />
  </div>

  <div class="form-group">
    <label for="image">Фото профиля:</label>
    <input type="file" id="image" name="image" accept="image/*" />
    <p class="form-note">Рекомендуемый размер: 300x300px, формат: JPG, PNG, WEBP.</p>
  </div>

  <button type="submit">Отправить</button>
</form>

</div>


  </main>

  <footer class="site-footer">
    <p>© 2025 ModelConnect Miami</p>
  </footer>

</body>
</html>
