---
layout: base
pagination:
  data: collections.profiles
  size: 1
  alias: profile
permalink: "profiles/{{ profile.slug  }}/index.html"

eleventyComputed:
  title: "{{ profile.name }} — {{ site.name }}"
  description: "Профиль {{ profile.name }}. {{ profile.city | default: 'Регион не указан' }}, {{ profile.category | default: 'Категория не указана' }}"
  seo_og_image: "https://res.cloudinary.com/{{ site.cloudinary_cloud_name }}/image/upload/w_600,h_400,c_fill,q_auto,f_webp{{ profile.image_url }}"
  seo_json_ld: |
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "{{ profile.name }}",
      "image": "https://res.cloudinary.com/{{ site.cloudinary_cloud_name }}/image/upload/w_600,h_400,c_fill,q_auto,f_webp{{ profile.image_url }}",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "{{ profile.city | default: 'Не указан' }}"
      },
      "jobTitle": "{{ profile.category | default: 'Без категории' }}",
      "email": "{{ profile.email | default: '' }}",
      "telephone": "{{ profile.phone | default: '' }}",
      "birthDate": "{{ profile.date | date: '%Y-%m-%d' }}",
      "url": "{{ site.url }}/profiles/{{ profile.slug  }}/"
    }
  breadcrumb_json_ld: |
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Главная",
          "item": "{{ site.url }}/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "{{ profile.city | default: 'Регион не указан' }}",
          "item": "{{ site.url }}/region/{{ profile.city | slugify }}/"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "{{ profile.category | default: 'Без категории' }}",
          "item": "{{ site.url }}/category/{{ profile.category | slugify }}/"
        },
        {
          "@type": "ListItem",
          "position": 4,
          "name": "{{ profile.name | escape }}",
          "item": "{{ site.url }}/profiles/{{ profile.slug }}/"
        }
      ]
    }
---

<article class="profile-detail">
  {% assign img_path = profile.image_url %}

  <img
    class="profile-detail__image"
    width="600"
    height="400"
    {% if img_path contains 'res.cloudinary.com' %}
      src="https://res.cloudinary.com/{{ site.cloudinary_cloud_name }}/image/upload/w_600,h_400,c_fill,q_auto,f_webp/{{ img_path | split: '/upload/' | last }}"
      srcset="
        https://res.cloudinary.com/{{ site.cloudinary_cloud_name }}/image/upload/w_300,h_200,c_fill,q_auto,f_webp/{{ img_path | split: '/upload/' | last }} 300w,
        https://res.cloudinary.com/{{ site.cloudinary_cloud_name }}/image/upload/w_600,h_400,c_fill,q_auto,f_webp/{{ img_path | split: '/upload/' | last }} 600w,
        https://res.cloudinary.com/{{ site.cloudinary_cloud_name }}/image/upload/w_1200,h_800,c_fill,q_auto,f_webp/{{ img_path | split: '/upload/' | last }} 1200w
      "
    {% else %}
      src="{{ img_path }}"
      srcset="{{ img_path }} 300w, {{ img_path }} 600w, {{ img_path }} 1200w"
    {% endif %}
    sizes="(max-width: 600px) 300px, (max-width: 1200px) 600px, 1200px"
    alt="Фото профиля {{ profile.name | escape }} ({{ profile.city | default: 'Регион не указан' | escape }})"
    loading="lazy"
  />
  <div class="profile-card__description"><h1>{{ profile.name }}</h1>
  <ul class="profile-detail__info">
    <li><strong>Город:</strong> {{ profile.city | default: "Не указан" }}</li>
    <li><strong>Категория:</strong> {{ profile.category | default: "Без категории" }}</li>
    <li><strong>Описание:</strong> {{ profile.description | default: "Нет описания" }}</li>
    {% if profile.age %}
      <li><strong>Возраст:</strong> {{ profile.age }}</li>
    {% endif %}
    {% if profile.email %}
      <li><strong>Email:</strong> <a href="mailto:{{ profile.email }}">{{ profile.email }}</a></li>
    {% endif %}
    {% if profile.phone %}
      <li><strong>Телефон:</strong> <a href="tel:{{ profile.phone }}">{{ profile.phone }}</a></li>
    {% endif %}
    {% if profile.date %}
      <li><strong>Дата регистрации:</strong> {{ profile.date | date: "%d.%m.%Y" }}</li>
    {% endif %}
  </ul></div>

</article>
